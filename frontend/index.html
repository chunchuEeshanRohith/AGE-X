<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="description" content="Age-X: The world's safest, age-aware short video platform." />
  <title>Age-X | Safety First</title>

  <!-- Fonts: Inter & Space Grotesk -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;800&family=Space+Grotesk:wght@300;500;700&display=swap"
    rel="stylesheet">

  <!-- CSS -->
  <link rel="stylesheet" href="style.css" />

  <!-- GSAP -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest"></script>
</head>

<body class="loading-state">

  <!-- DYNAMIC BACKGROUND -->
  <div id="cosmos-container" class="cosmos-background"></div>

  <!-- SPLASH SCREEN -->
  <div id="splashScreen" class="splash-screen">
    <div class="splash-content">
      <div class="splash-logo-wrapper">
        <h1 class="splash-logo">AGE<span class="highlight">-X</span></h1>
        <div class="splash-glitch" aria-hidden="true">AGE-X</div>
      </div>
      <p class="splash-text">INITIALIZING SECURE PROTOCOLS...</p>
      <div class="loader-track">
        <div class="loader-bar"></div>
      </div>
      <div class="splash-subtext">AI-POWERED PROTECTION SYSTEM</div>
    </div>
  </div>


  <!-- SECURITY POPUP -->
  <div id="securityPopup" class="security-popup-overlay" style="display: none;">
    <div class="security-popup glass-panel-lg">
      <div class="popup-icon-wrapper">
        <i data-lucide="shield-alert" class="popup-alert-icon"></i>
      </div>
      <h2 class="popup-title">SECURITY ALERT</h2>
      <p class="popup-message">
        <strong>No Face Detected.</strong><br>
        For your safety, content has been defaulted to <strong>Kid Mode</strong>.
      </p>
      <div class="popup-subtext">
        Please re-align your face with the camera to restore full access.
      </div>
      <button id="closeSecurityPopup" class="btn-primary glass-btn-sm" style="margin-top: 15px;">
        <span>Dismiss</span>
      </button>
    </div>
  </div>

  <!-- MAIN APP CONTAINER -->
  <main class="app-container" aria-hidden="true">

    <!-- GLOBAL ELEMENTS (Always Visible) -->
    <header class="top-bar glass-panel-header">
      <div class="brand">
        <div class="brand-icon">
          <i data-lucide="shield-check"></i>
        </div>
        <span class="logo-text">AGE-X</span>
      </div>

      <div class="header-controls">
        <button id="btnCameraToggle" class="icon-btn-ghost pulse-hover" aria-label="Toggle Camera">
          <i data-lucide="video"></i>
        </button>
        <div id="statusBadge" class="status-badge status-kid">
          <div class="status-dot"></div>
          <span id="ageLabel">SECURE</span>
        </div>
      </div>
    </header>

    <div class="camera-wrapper glass-panel-sm">
      <video id="cameraFeed" autoplay muted playsinline></video>
      <div class="hud-corners">
        <span class="corner tl"></span>
        <span class="corner tr"></span>
        <span class="corner bl"></span>
        <span class="corner br"></span>
      </div>
      <div class="scan-line"></div>
    </div>

    <!-- VIEWS -->
    <div id="viewsWrapper" class="views-wrapper">

      <!-- LOGIN VIEW -->
      <section id="view-login" class="view active-view" data-route="login">
        <div class="login-container glass-morphism">
          <div class="login-visuals">
            <div class="orb"></div>
          </div>
          <h1>WELCOME TO THE<br><span class="text-gradient">FUTURE OF SAFETY</span></h1>
          <p>Advanced AI protection for the next generation.</p>

          <button id="btnLogin" class="btn-primary glass-btn-lg glow-effect">
            <i data-lucide="chrome"></i>
            <span>Authenticate with Google</span>
          </button>

          <div class="legal-text">
            Entry restricted to authorized personnel & verified users.
            <br>By entering, you accept the <strong>Protocol Zero</strong> terms.
          </div>
        </div>
      </section>

      <!-- HOME VIEW (Grid) -->
      <section id="view-home" class="view" data-route="home">
        <div class="view-header">
          <h2 class="view-title">DISCOVER</h2>
          <div class="decoration-line"></div>
        </div>
        <div class="content-grid" id="homeGrid">
          <!-- Dynamic Items -->
        </div>
      </section>

      <!-- REELS VIEW (Player) -->
      <section id="view-reels" class="view" data-route="reels">
        <div id="reelContainer" class="reel-container">
          <iframe id="reelPlayer" title="Content Player" frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; compute-pressure"
            allowfullscreen>
          </iframe>
          <div class="video-overlay-gradient"></div>

          <div id="scanningOverlay" class="scanning-overlay">
            <div class="hud-circle"></div>
            <div class="scan-line-horizontal"></div>
            <div class="scan-text">ANALYZING BIOMETRICS...</div>
            <div id="secureIndicator" class="secure-indicator">
              <i data-lucide="lock" style="width:14px;"></i> <span>E2E ENCRYPTED</span>
            </div>
          </div>

          <div id="noFaceOverlay" class="no-face-overlay">
            <div class="lock-icon-wrapper">
              <i data-lucide="lock" class="warning-icon"></i>
            </div>
            <div class="warning-text">ACCESS SUSPENDED</div>
            <div class="warning-sub">Biometric verification lost. Re-align for access.</div>
          </div>

          <div class="swipe-hint-overlay">
            <div class="swipe-arrow">
              <i data-lucide="chevron-up"></i>
            </div>
            <span class="hint-text">SWIPE</span>
          </div>
        </div>
      </section>

      <!-- PROFILE VIEW -->
      <section id="view-profile" class="view" data-route="profile">
        <div class="profile-card glass-panel-lg">
          <div class="profile-header">
            <div class="profile-avatar glass-avatar" id="profileAvatar">
              <i data-lucide="user"></i>
              <div class="avatar-ring"></div>
            </div>
            <h2 id="profileName">Guest User</h2>
            <div class="profile-status">
              <span class="status-indicator"></span>
              <span id="profileEmail">System Active</span>
            </div>
          </div>

          <div class="stats-row">
            <div class="stat-card glass-panel-sm">
              <span class="stat-val">0</span>
              <span class="stat-label">SAVED</span>
            </div>
            <div class="stat-card glass-panel-sm">
              <span class="stat-val">0h</span>
              <span class="stat-label">SESSION</span>
            </div>
          </div>
        </div>

        <div class="settings-list">
          <button class="setting-item glass-btn" id="btnLogout">
            <div class="setting-icon"><i data-lucide="log-out"></i></div>
            <span>Terminate Session</span>
            <i data-lucide="chevron-right" class="arrow-right"></i>
          </button>
          <div class="setting-item glass-btn disabled">
            <div class="setting-icon"><i data-lucide="shield-alert"></i></div>
            <span>Security Level: MAX</span>
            <i data-lucide="lock" class="lock-mini"></i>
          </div>
        </div>
      </section>

    </div>

    <!-- NAVIGATION BAR -->
    <nav class="bottom-nav glass-nav">
      <button class="nav-item" data-target="home">
        <div class="nav-icon-wrapper"><i data-lucide="grid"></i></div>
        <span>HOME</span>
      </button>
      <button class="nav-item active-nav" data-target="reels">
        <div class="nav-icon-wrapper"><i data-lucide="play"></i></div>
        <span>STREAM</span>
      </button>
      <button class="nav-item" data-target="profile">
        <div class="nav-icon-wrapper"><i data-lucide="user"></i></div>
        <span>ID</span>
      </button>
      <div class="nav-indicator"></div>
    </nav>

    <!-- Hidden Canvas -->
    <canvas id="processingCanvas" style="display: none;"></canvas>

  </main>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
  <script type="module" src="app.js"></script>
</body>

</html>